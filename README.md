# Terraform GitHub Actions Pipeline ğŸš€

## What This Pipeline Does
This GitHub Actions workflow automatically manages your Terraform infrastructure with the following steps:

| Event               | Job Run       | Action                     | Automatic? |
|------------------|-------------|--------------------------|------------|
| Pull Request Opened | `plan`      | Validate + Preview Plan   | âœ… Yes     |
| Pull Request Approved | Nothing    | Waits for Merge          | âŒ No     |
| Branch Merged       | `apply`     | Deploy Infrastructure     | âœ… Yes     |
| Push to Main        | `apply`     | Deploy Infrastructure     | âœ… Yes     |

---

## Folder Structure
```bash
.
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ terraform.yml # The GitHub Actions workflow
â”œâ”€â”€ main.tf              # Your Terraform code
â”œâ”€â”€ variables.tf         # Terraform variables
â””â”€â”€ outputs.tf           # Terraform outputs
â””â”€â”€ README.md            # Documentation
```

---

## How the Pipeline Works ğŸ”¥
### 1. Pull Request Event (Plan)
When a **Pull Request** is opened to the `main` branch, the pipeline will:
- Checkout your code
- Install Terraform
- Run `terraform init`
- Validate your Terraform code
- Preview the Terraform Plan (without applying it)
- Add a **PR Comment** showing the plan using GitHub Actions Bot ğŸ¤–

âœ… Example PR Comment:
```
#### Terraform Format and Style ğŸ–Œsuccess
#### Terraform Initialization âš™ï¸success
#### Terraform Validation ğŸ¤–success
#### Terraform Plan ğŸ“–success

<details><summary>Show Plan</summary>

```terraform
resource "aws_s3_bucket" "example" {
  bucket = "my-bucket-name"
}
```

</details>

Pushed by: @adrianjleon
```

---

### 2. Merge Event (Apply)
If the Pull Request is **merged** into the `main` branch, the pipeline will automatically:
- Checkout your code
- Install Terraform
- Run `terraform init`
- **Apply the infrastructure changes**

âœ… Example Console Output:
```
Terraform Apply Complete!
Apply complete! Resources: 1 added, 0 changed, 0 destroyed.
```

---

## How to Set Up This Pipeline ğŸ”¥
### 1. Create Terraform Cloud API Token
1. Go to ğŸ‘‰ https://app.terraform.io/
2. Go to **User Settings â¡ï¸ Tokens â¡ï¸ Create API Token**
3. Copy the Token ğŸ”‘

### 2. Add GitHub Secrets
Go to your GitHub Repository:
- **Settings â¡ï¸ Secrets and variables â¡ï¸ Actions â¡ï¸ New Repository Secret**

| Secret Name    | Value                |
|---------------|---------------------|
| `TF_API_TOKEN` | ğŸ”‘ Your Terraform Cloud API Token |
| `GITHUB_TOKEN` | Automatically generated by GitHub |

---

## How to Use It ğŸ”‘
1. Push your Terraform code to your repo
2. Create a Pull Request
3. Wait for the **Terraform Plan** comment
4. If everything is correct, **Merge the PR**
5. Watch your infrastructure deploy automatically ğŸš€

---

## How to Customize It ğŸ”¥
If you want to **require manual approval** before running `terraform apply`, add this to your `apply` job:
```yaml
environment:
  name: production
  url: https://app.terraform.io/
```

---

## Features Added âœ…
- CI/CD for Terraform
- Automatic Pull Request Comments
- Infrastructure Deployment on Merge
- Secrets with GitHub Actions



